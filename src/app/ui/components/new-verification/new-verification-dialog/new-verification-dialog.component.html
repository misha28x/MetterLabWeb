<mat-accordion>
  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)">
    <mat-expansion-panel-header>
      Загальні відомості
    </mat-expansion-panel-header>

    <ng-template matExpansionPanelContent>
      <form [formGroup]="generalDataForm">
        <div class="full-width">
          <span>Прізвище</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Прізвище" formControlName="surname">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Ім'я</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Ім'я" formControlName="name">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>По-батькові</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="По-батькові" formControlName="middlename">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Номер телефону</span>
          <mat-form-field class="input-field">
            <input matInput #phone placeholder="Телефон" maxlength="12" formControlName="phone">
            <mat-hint align="start"><strong>Don't disclose personal info</strong> </mat-hint>
            <mat-hint align="end">{{phone.value.length}} / 12</mat-hint>
          </mat-form-field>
        </div>
      </form>
    </ng-template>

    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Далі</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)">
    <mat-expansion-panel-header>
      Місцезнаходженя
    </mat-expansion-panel-header>

    <ng-template matExpansionPanelContent>
      <form [formGroup]="locationForm">
        <div class="full-width">
          <span>Область</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Область" formControlName="region">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Район</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Район" formControlName="district">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Населений пункт</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Населений пункт" formControlName="settlement">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Індекс</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Індекс" formControlName="index">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Вулиця</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Вулиця" formControlName="street">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Будинок</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Будинок" formControlName="house">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Квартира</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Квартира" formControlName="apartment">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Лічильник</span>

          <table class="inline-form" cellspacing="0">
            <tr>
              <td class="w-2">
                <mat-form-field>
                  <mat-select formControlName="counterQuantity">
                    <mat-option [value]="1">1</mat-option>
                    <mat-option [value]="2">2</mat-option>
                    <mat-option [value]="3">3</mat-option>
                    <mat-option [value]="4">4</mat-option>
                    <mat-option [value]="5">5</mat-option>
                    <mat-option [value]="6">6</mat-option>
                    <mat-option [value]="7">7</mat-option>
                    <mat-option [value]="8">8</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td class="w-4">
                <mat-form-field>
                  <mat-select formControlName="serviceType">
                    <mat-option [value]="'Холодна вода'">Холодна вода</mat-option>
                    <mat-option [value]="'Гаряча вода'">Гаряча вода</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td class="w-6">
                <mat-form-field>
                  <mat-select formControlName="serviceProvider">
                    <!-- TODO: Добавити табличку виробників -->
                    <mat-option [value]="'ЛУЦЬКВОДОКАНАЛ'">КП "ЛУЦЬКВОДОКАНАЛ"</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>

        <div class="full-width inline">
          <div class="d-flex justify-content-between align-items-center">
            <span>Провести повірку з демонтажом</span>
            <mat-checkbox formControlName="isDismantled"></mat-checkbox>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <mat-checkbox [labelPosition]="'before'" formControlName="isUnique">Перевірено на дублі</mat-checkbox>
            <button mat-raised-button color="primary" matTooltip="Перевірити на дублі" (click)="checkForDupliacates()">
              <i class="icofont-copy"></i>
            </button>
          </div>
        </div>
      </form>
    </ng-template>

    <mat-action-row>
      <button mat-button color="warn" (click)="prevStep()">Назад</button>
      <button mat-button color="primary" (click)="nextStep()">Далі</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)">
    <mat-expansion-panel-header>
      Лічильник
    </mat-expansion-panel-header>

    <ng-template matExpansionPanelContent>
      <form [formGroup]="counterForm">
        <div class="full-width inline">
          <div class="d-flex justify-content-between align-items-center">
            <span>Лічильник демонтовано</span>
            <mat-checkbox formControlName="isDismantled"></mat-checkbox>
          </div>
        </div>

        <div class="full-width">
          <span>Дата монтажу лічильника</span>
          <mat-form-field class="input-field">
            <input matInput [matDatepicker]="montageDate" placeholder="Дата монтажу лічильника" formControlName="montageDate">
            <mat-datepicker-toggle matSuffix [for]="montageDate"></mat-datepicker-toggle>
            <mat-datepicker #montageDate></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>ПІБ працівника</span>
          <mat-form-field class="input-field">
            <mat-select placeholder="Працівник" formControlName="employeeName">
              <mat-option *ngFor="let employee of data.name" [value]="employee">{{ employee }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Коментар</span>
          <mat-form-field class="input-field">
            <mat-label>Коментар</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="5"
              cdkAutosizeMaxRows="10" formControlName="comment"></textarea>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Номер лічильника</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Номер лічильника" formControlName="counterNumber">
          </mat-form-field>
        </div>

        <div class="full-width inline">
          <div class="d-flex justify-content-between align-items-center">
            <span>Наявність пломби</span>
            <mat-checkbox formControlName="haveSeal"></mat-checkbox>
          </div>
        </div>

        <div class="full-width">
          <span>Тип Лічильника</span>
          <mat-form-field class="input-field">
            <input type="text" placeholder="Типорозмір лічильника" formControlName="counterType" matInput [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" >
              <mat-option *ngFor="let type of data.Device" [value]="type">{{ type }}</mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Символ</span>
          <mat-form-field class="input-field">
            <mat-select placeholder="Символ" formControlName="symbol">
              <mat-option *ngFor="let symbol of data.DN" [value]="symbol">{{ symbol }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Рік випуску</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Рік випуску лічильника" formControlName="productionYear">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Накопичений об'єм</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="'xxxxx'" formControlName="acumulatedVolume">
          </mat-form-field>
        </div>
      </form>
    </ng-template>

    <mat-action-row>
      <button mat-button color="warn" (click)="prevStep()">Назад</button>
      <button mat-button color="primary" (click)="nextStep()">Далі</button>
    </mat-action-row>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)">
    <mat-expansion-panel-header>
      Додаткова інформація
    </mat-expansion-panel-header>

    <ng-template matExpansionPanelContent>
      <form [formGroup]="additionalDataForm">
        <div class="full-width">
          <span>Під'їзд</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Під'їзд" formControlName="entrance">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Код на дверях</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Код на дверях" formControlName="doorCode">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Поверх</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Поверх" formControlName="floor">
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Бажана дата проведення повірки</span>
          <mat-form-field class="input-field">
            <input matInput [matDatepicker]="favorableDatePicker" placeholder="Бажана дата повірки" formControlName="favorDate">
            <mat-datepicker-toggle matSuffix [for]="favorableDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #favorableDatePicker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="full-width inline">
          <div class="d-flex justify-content-between align-items-center">
            <span>Справність сантехніки</span>
            <mat-checkbox formControlName="sanitaryWellFare"></mat-checkbox>
          </div>
        </div>

        <div class="full-width">
          <span>Вода відсутня до</span>
          <mat-form-field class="input-field">
            <input matInput [matDatepicker]="waterDatePicker" placeholder="Бажана дата повірки" formControlName="waterAbsentTo">
            <mat-datepicker-toggle matSuffix [for]="waterDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #waterDatePicker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Примітка</span>
          <mat-form-field class="input-field">
            <mat-label>Примітка</mat-label>
            <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="5"
              cdkAutosizeMaxRows="10"></textarea>
          </mat-form-field>
        </div>
      </form>
    </ng-template>

    <mat-action-row>
      <button mat-button color="warn" (click)="prevStep()">Назад</button>
      <button mat-button color="primary" (click)="nextStep()">Завершити</button>
    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>

<div class="buttons">
  <button mat-raised-button color="primary" (click)="sendData()">Надіслати</button>
<button mat-raised-button color="primary" (click)="saveByPattern()">Зберегти за шаблоном</button>
  <button mat-raised-button color="warn" (click)="prevStep()">Очистити</button>
</div>
