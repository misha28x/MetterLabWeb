<div mat-dialog-content class="content">
  <div class="protocol-block">
    <table class="protocol-table">
      <tr>
        <td>Номер заявки</td>
        <td>{{ data.applicationNumber }}</td>
      </tr>
      <tr>
        <td>Дата протоколу час п/н</td>
        <td>{{ data.date }}</td>
      </tr>
      <tr>
        <td>Номер установки</td>
        <td>{{ data.deviceNumber }}</td>
      </tr>
      <tr>
        <td>Номер лічильника</td>
        <td>{{ data.counterNumber }}</td>
      </tr>
      <tr>
        <td>Тип лічильника</td>
        <td>{{ data.symbol }} {{ data.type }}</td>
      </tr>
      <tr>
        <td>Призначення лічильника</td>
        <td>{{ data.serviceType }}</td>
      </tr>
      <tr>
        <td>Температура</td>
        <td>{{ data.temperature }}</td>
      </tr>
      <tr>
        <td>Рік випуску</td>
        <td>{{ data.productionYear }}</td>
      </tr>
      <tr>
        <td>Накопичений об'єм</td>
        <td>{{ data.acumulatedVolume }}</td>
      </tr>
      <tr>
        <td>Широта</td>
        <td>{{ data.latitude }}</td>
      </tr>
      <tr>
        <td>Довгота</td>
        <td>{{ data.longitude }}</td>
      </tr>
      <tr>
        <td>Статус витрат</td>
        <td [ngClass]="{
            'success': data.isInZone == 'В зоні',
            'error': data.isInZone != 'В зоні'
          }">
          {{ data.isInZone }}</td>
      </tr>
      <tr>
        <td>Результат</td>
        <td [ngClass]="{
            'success': data.result == 'Годен',
            'error': data.isInZone != 'Годен'
        }">
          {{ data.result }}</td>
      </tr>
      <!-- <tr>
        <td>Дата підпису особи</td>
        <td></td>
      </tr>
      <tr>
        <td>ПІБ особи, що підписала</td>
        <td></td>
      </tr> -->
      <tr>
        <td>Статус</td>
        <td>{{ data.protocolStatus ? 'Розблоковано' : 'Заблоковано' }}</td>
      </tr>
    </table>
    
    <div class="controls">
      <img [src]="getImage(data.image)">

      <div class="actions">
        <h3 class="action-title">Перегляд фото</h3>
        <div class="photo-actions">
          <button mat-icon-button color="primary">
            <i class="icofont-reply"></i>
          </button>
          
          <button mat-raised-button color="primary">180&#176;</button>

          <button mat-icon-button color="primary" class="reverse">
            <i class="icofont-reply"></i>
          </button>
        </div>
        <h3 class="action-title">Протокол</h3>
        <div class="protocol-actions">
          <button mat-icon-button color="primary">
            <i class="icofont-rounded-left"></i>
          </button>

          <button mat-raised-button class="bg-success">Зберегти</button>

          <button mat-icon-button color="primary">
            <i class="icofont-rounded-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="tests-block">

    <table class="test-table first">
      <tr>
        <td>Назва тесту</td>
      </tr>
      <tr>
        <td>Задана витрата м³/год</td>
      </tr>
      <tr>
        <td>Допустима похибка%</td>
      </tr>
      <tr>
        <td>Об'єм еталону, дм³</td>
      </tr>
      <tr>
        <td>Початкове значення лічильника, дм³</td>
      </tr>
      <tr>
        <td>Кінцеве значення лічильника, дм³</td>
      </tr>
      <tr>
        <td>Об'єм за лічильником, дм³</td>
      </tr>
      <tr>
        <td>Тривалість тесту, с</td>
      </tr>
      <tr>
        <td>Фактична витрата, м³/год</td>
      </tr>
      <tr>
        <td>Статус витрати</td>
      </tr>
      <tr>
        <td>Фактична похибка, %</td>
      </tr>
      <tr>
        <td>Результат тесту</td>
      </tr>
    </table>


    <div class="test" *ngFor="let test of data.tests">
      <table class="test-table">
        <tr>
          <td>{{ test.name }}</td>
        </tr>
        <tr>
          <td>{{ test.installedExes | number:'1.1-2' }}</td>
        </tr>
        <tr>
          <td>{{ test.assumedFault | number:'1.1-2'}}</td>
        </tr>
        <tr>
          <td>{{ test.etalonCapacity | number:'1.1-2'}}</td>
        </tr>
        <tr>
          <td>{{ test.initValue | number:'1.1-2' }}</td>
        </tr>
        <tr>
          <td>{{ test.finalValue | number:'1.1-2'}}</td>
        </tr>
        <tr>
          <td>{{ test.counterCapacity | number:'1.1-2' }}</td>
        </tr>
        <tr>
          <td>{{ test.testDuration | number:'1.1-2'}}</td>
        </tr>
        <tr>
          <td>{{ test.mediumExes | number:'1.1-2' }}</td>
        </tr>
        <tr>
          <td [ngClass]="{
            'success': data.isInZone == 'В зоні',
            'error': data.isInZone != 'В зоні'
          }">
            {{ test.isInZone }}
          </td>
        </tr>
        <tr>
          <td>{{ test.calculatedFault | number:'1.1-2' }}</td>
        </tr>
        <tr>
          <td [ngClass]="{
            'success': data.result == 'Годен',
            'error': data.isInZone != 'Годен'
          }">
            {{ test.result }}
          </td>
        </tr>
      </table>

      <div class="test-images">
        <img (click)="changeStartState(test.startStateImage, test.initValue, test.id)" [src]="getImage(test.startStateImage)">
        <img (click)="changeEndState(test.endStateImage, test.finalValue, test.id)" [src]="getImage(test.endStateImage)">
      </div>
    </div>
  </div>
</div>
