<h2 mat-dialog-title>Детальніше</h2>

<div mat-dialog-content class="content">
  <mat-tab-group>
    <mat-tab [label]="'Загальна відомості'">
      <form [formGroup]="generalDataForm">
        <div class="full-width">
          <span>Прізвище</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Прізвище" formControlName="surname" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Ім'я</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Ім'я" formControlName="name" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>По-батькові</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="По-батькові" formControlName="middlename" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Номер телефону</span>
          <mat-form-field class="input-field">
            <span matPrefix>+ &nbsp;</span>
            <input matInput #phone placeholder="Телефон" maxlength="12" formControlName="phone" />
            <mat-hint align="end">{{ phone.value.length }} / 12</mat-hint>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>E-mail</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="E-mail" formControlName="mail" />
          </mat-form-field>
        </div>

        <div class="full-width inline">
          <div class="d-flex justify-content-between align-items-center">
            <span>Юридична особа</span>
            <div class="input-field">
              <mat-checkbox #isEntity></mat-checkbox>
            </div>
          </div>
        </div>

        <div *ngIf="isEntity.checked" class="full-width">
          <span>ІПН</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Індивідуальний податковий номер" formControlName="ipn" />
          </mat-form-field>
        </div>
      </form>
    </mat-tab>

    <mat-tab [label]="'Місцезнаходження'">
      <form [formGroup]="locationForm">
        <div class="full-width">
          <span>Область</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Область" formControlName="region" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Район</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Район" formControlName="district" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Населений пункт</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Населений пункт" formControlName="settlement" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Індекс</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Індекс" formControlName="index" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Вулиця</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Вулиця" formControlName="street" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Будинок</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Будинок" formControlName="house" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Квартира</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Квартира" formControlName="apartment" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Лічильник</span>

          <table class="inline-form" cellspacing="0">
            <tr>
              <td class="w-2">
                <mat-form-field>
                  <mat-select formControlName="counterQuantity">
                    <mat-option [value]="'1'">1</mat-option>
                    <mat-option [value]="'2'">2</mat-option>
                    <mat-option [value]="'3'">3</mat-option>
                    <mat-option [value]="'4'">4</mat-option>
                    <mat-option [value]="'5'">5</mat-option>
                    <mat-option [value]="'6'">6</mat-option>
                    <mat-option [value]="'7'">7</mat-option>
                    <mat-option [value]="'8'">8</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td class="w-4">
                <mat-form-field>
                  <mat-select formControlName="serviceType">
                    <mat-option [value]="'0'">Холодна вода</mat-option>
                    <mat-option [value]="'1'">Гаряча вода</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td class="w-6">
                <mat-form-field>
                  <mat-select formControlName="serviceProvider">
                    <!-- TODO: Добавити табличку виробників -->
                    <mat-option [value]="'13270431'">КП "ЛУЦЬКВОДОКАНАЛ"</mat-option>
                    <mat-option [value]="'26366904'">ДКП "ЛУЦЬКТЕПЛО"</mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>

        <div class="full-width">
          <span>Коментар</span>
          <mat-form-field class="input-field">
            <mat-label>Коментар</mat-label>
            <textarea
              matInput
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="5"
              cdkAutosizeMaxRows="10"
              formControlName="comment"
            ></textarea>
          </mat-form-field>
        </div>

        <div class="full-width inline" *ngIf="permission !== 2">
          <div class="d-flex justify-content-between align-items-center">
            <mat-checkbox [labelPosition]="'before'" formControlName="isUnique"
              >Перевірено на дублі</mat-checkbox
            >
            <button
              mat-raised-button
              color="primary"
              matTooltip="Перевірити на дублі"
              (click)="checkForDupliacates()"
            >
              <i class="icofont-copy"></i>
            </button>
          </div>
        </div>
      </form>
    </mat-tab>

    <mat-tab *ngIf="permission !== 2" [label]="'Лічильник'">
      <form [formGroup]="counterForm">
        <div class="full-width">
          <span>ПІБ працівника</span>
          <mat-form-field class="input-field">
            <mat-select placeholder="Працівник" formControlName="employeeName">
              <mat-option *ngFor="let employee of data.name" [value]="employee">{{
                employee
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Номер лічильника</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Номер лічильника" formControlName="counterNumber" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Наявність пломби</span>
          <div class="input-field">
            <mat-checkbox formControlName="haveSeal"></mat-checkbox>
          </div>
        </div>

        <div class="full-width">
          <span>Тип Лічильника</span>
          <mat-form-field class="input-field">
            <input
              type="text"
              placeholder="Типорозмір лічильника"
              formControlName="counterType"
              matInput
              [matAutocomplete]="auto"
            />
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let type of data.Device" [value]="type">{{ type }}</mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Символ</span>
          <mat-form-field class="input-field">
            <mat-select placeholder="Символ" formControlName="symbol">
              <mat-option *ngFor="let symbol of data.DN" [value]="symbol">{{ symbol }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Рік випуску</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Рік випуску лічильника" formControlName="productionYear" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Накопичений об'єм</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="'xxxxx'" formControlName="acumulatedVolume" />
          </mat-form-field>
        </div>
      </form>
    </mat-tab>

    <mat-tab [label]="'Додаткова інформація'">
      <form [formGroup]="additionalDataForm">
        <div class="full-width">
          <span>Під'їзд</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Під'їзд" formControlName="entrance" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Код на дверях</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Код на дверях" formControlName="doorCode" />
          </mat-form-field>
        </div>

        <div class="full-width">
          <span>Поверх</span>
          <mat-form-field class="input-field">
            <input matInput placeholder="Поверх" formControlName="floor" />
          </mat-form-field>
        </div>

        <div *ngIf="permission !== 2" class="full-width">
          <span>Бажана дата проведення повірки</span>
          <div class="input-field form-group">
            <input
              type="text"
              class="form-control"
              #dp="bsDatepicker"
              bsDatepicker
              formControlName="favorDate"
              [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD' }"
            />
          </div>
        </div>

        <div *ngIf="permission !== 2" class="full-width">
          <span>Бажаний час проведення повірки</span>
          <div class="input-field form-group">
            <timepicker formControlName="favorTime" [showMeridian]="false"></timepicker>
          </div>
        </div>

        <div class="full-width">
          <span>Справність сантехніки</span>
          <div class="input-field">
            <mat-checkbox formControlName="sanitaryWellfare"></mat-checkbox>
          </div>
        </div>

        <div class="full-width">
          <span>Примітка</span>
          <mat-form-field class="input-field">
            <mat-label>Примітка</mat-label>
            <textarea
              matInput
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="5 "
              cdkAutosizeMaxRows="10"
              formControlName="note"
            ></textarea>
          </mat-form-field>
        </div>
      </form>
    </mat-tab>
  </mat-tab-group>
</div>

<div mat-dialog-actions>
  <button mat-button mat-dialog-close>Скасувати</button>
  <button mat-raised-button color="primary" (click)="sendData()">
    Зберегти
  </button>
</div>
