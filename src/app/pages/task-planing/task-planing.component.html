<mat-card>
  <mat-card-content>
    <div class="actions">
      <div class="task-actions">
        <button mat-raised-button class="bg-success" (click)="sendData()">
          <mat-icon>send</mat-icon>
          Створити завдання
        </button>
      </div>

      <div class="user-actions">
        <button mat-raised-button color="primary" class="bg-warning"><i class="icofont-delete"></i>
          Скасувати Дійову Особу
        </button>
        <button mat-raised-button color="warn"><i class="icofont-minus"></i>Відхилити Повірку</button>
      </div>
    </div>
    
    <app-table [checkboxes]="true" [desiredStatus]="'В роботі'" (rowSelected)="onChange($event)" [hovered]="true" [bordered]="true" [tableData]="(tableData | async)"
      [pagination]="true">

      <app-column [columnTitle]="'Номер Заявки'" [columnName]="'applicationNumber'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [columnTitle]="'Дата Надходження Заявки'" [columnName]="'addingDate'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [columnTitle]="'Клієнт'" [columnName]="'client'" [enableSorting]="true" [enableFiltering]="true">
      </app-column>

      <app-column [columnTitle]="'Надавач Послуг'" [columnName]="'serviceProvider'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="115" [columnTitle]="'Район'" [columnName]="'district'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [columnTitle]="'Вулиця'" [columnName]="'street'" [enableSorting]="true" [enableFiltering]="true">
      </app-column>

      <app-column [width]="75" [columnTitle]="'Будинок'" [columnName]="'house'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="90" [columnTitle]="'Квартира'" [columnName]="'apartment'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>
      <!-- TODO: add fields to Database & Rename fields -->
      <app-column [columnTitle]="'Бажана дата повірки'" [columnName]="'favorDate'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [columnTitle]="'Cправність Сантехніки'" [columnName]="'sanitaryWellfare'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="115" [columnTitle]="'Вода відсутня до'" [columnName]="'waterAbsentTo'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="140" [columnTitle]="'Наявність пломби'" [columnName]="'haveSeal'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="120" [columnTitle]="'Телефон'" [columnName]="'phoneNumber'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [width]="110" [columnTitle]="'Примітка'" [columnName]="'note'" [enableSorting]="true"
        [enableFiltering]="true"></app-column>

      <app-column [columnTitle]="'Дії'" [width]="125">
        <ng-template #tableBodyTemplate let-row="row">
          <div class="actions-row">
            <button mat-icon-button (click)="detailView(row['applicationNumber'])">
              <i class="icon icofont-info-circle color-info" matTooltip="Інформація"></i>
            </button>

            <button mat-icon-button (click)="cancellEmployee(row['applicationNumber'])">
              <i class="fas fa-user-times color-warning" matTooltip="Скасувати відповідальну особу"></i>
            </button>

            <button mat-icon-button (click)="checkForDuplicate(row)">
              <i class="far fa-copy color-info" matTooltip="Перевірити на дублі"></i>
            </button>

            <button mat-icon-button (click)="clientInaccesable(row['applicationNumber'])">
              <mat-icon class="color-error" matTooltip="Недозвон">phone_missed</mat-icon>
            </button>

            <button mat-icon-button (click)="rejectVerification(row['applicationNumber'])">
              <mat-icon class="color-error" matTooltip="Відхилити повірку">cancel</mat-icon>
            </button>

            <button mat-icon-button (click)="showClientInfo(row['applicationNumber'])">
              <i class="icofont-info color-info" matTooltip="Інформація про клієнта"></i>
            </button>
          </div>
        </ng-template>
      </app-column>
    </app-table>
  </mat-card-content>
</mat-card>
